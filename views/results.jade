
extends ../node_modules/jade-bootstrap/_bootstrap 

head

  title= title
  srch= srch
  res= res
  path= path
  
block body

  - var type = '?xquery'
  
  +navbar("The Colenso Project", "dropdown_menu")
    +nav_item("/") Home
    +nav_item("/browse") Browse
    +nav_item("/results", "active") Search
  .container
    h1 #{title}
  .container
    .col-md-10
        form.navbar-form(role='search')
          .input-group
            .input-group-btn
              button.btn.btn-default.dropdown-toggle(type='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='true')
                | Search Type 
                span.caret
              |         
              ul.dropdown-menu(aria-labelledby='dropdownMenu1')
                li
                  a(href='#plain', data-value='plain') Plain Text
                |           
                li
                  a(href='#xquery', value='?xquery', id='xquery', onclick='bleh()') XQuery
                |                 
            input#srch.form-control(type='text', placeholder='Search', name='srch')
            |       
            .input-group-btn
              button.btn.btn-default(type='submit')
                i.glyphicon.glyphicon-search
  .container
    h1 #{type}
  .container
    .panel.panel-default
      .panel.heading #{res.length} results for "#{srch}" 
      .panel-body
        .list-group(id= "buttons")
          each button_id in res
            a.list-group-item(href="results?srch=#{button_id}?title") #{button_id}
            
  
   script(type='text/javascript').
    var num = null;
    function bleh() {
      
      var tag = "?xquery";
      
      var buttonsList = document.getElementById("buttons");
      alert(buttonsList[0]);
      
      buttonsList.forEach(function(entry) {
        document.getElementById(entry).href = "results?srch=#{button_id}?title?xquery";
        alert("myGod");
      });
      
      return false;
    }
  